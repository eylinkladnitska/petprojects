
#### **1. Authentication & Authorization Service (Auth Service)**

- **Публикует:**
    - UserRegisteredEvent: После успешной регистрации нового пользователя.
    - User2FAEnabledEvent: После успешного включения 2FA пользователем.
    - UserPasswordChangedEvent: (Предполагаемое событие) После изменения пользователем пароля.
    - UserStatusChangedEvent: (Предполагаемое событие) Если пользователь был заблокирован/разблокирован через Auth Service (или Admin Service и Auth Service потребляет).
- **Потребляет:** (Не потребляет напрямую по нашей схеме)

#### **2. User & Profile Service**

- **Публикует:**
    - ProfileUpdatedEvent: При обновлении любого поля в профиле пользователя (имя, описание, аватар и т.д.).
    - UserReviewAddedEvent: После добавления нового отзыва о пользователе.
- **Потребляет:**
    - UserRegisteredEvent: От Auth Service, для создания базового UserProfile после регистрации.

#### **3. Roles & Permissions Service**

- (Не участвует в асинхронных взаимодействиях по нашей схеме. Взаимодействует только через REST API).

#### **4. Order & Project Service**

- **Публикует:**
    - OrderPlacedEvent: После создания нового заказа (но до оплаты публикации).
    - OrderPublishedEvent: После оплаты публикации заказа и его появления в каталоге.
    - OrderAcceptedForPayoutEvent: Когда заказчик принимает работу и инициирует выплату.
    - OrderFullyCompletedEvent: Когда заказ окончательно завершен (после успешной выплаты).
    - OrderUpdatedEvent: При изменении других важных полей заказа (например, сроки, бюджет, отклик принят/отклонен).
    - BidCreatedEvent: Когда фрилансер создает новый отклик на заказ.
    - BidStatusChangedEvent: Когда статус отклика изменяется (например, принят, отклонен).
- **Потребляет:**
    - OrderPublicationFeeDebitedEvent: От Payment Service, подтверждение оплаты комиссии за публикацию.
    - PaymentProcessedEvent: От Payment Service, подтверждение успешной выплаты по заказу.

#### **5. Messenger Service**

- **Публикует:**
    - NewMessageEvent: При отправке нового сообщения в чате заказа.
    - AttachmentUploadedEvent: (Опционально) При загрузке вложения в чат.
- **Потребляет:** (Не потребляет напрямую по нашей схеме. Может быть, OrderUpdatedEvent для закрытия чата, но не было явно прописано).

#### **6. Notification Service**

- **Публикует:** (Не публикует напрямую, его задача - отправлять уведомления, а не инициировать новые события).
- **Потребляет:**
    - UserRegisteredEvent: Для отправки приветствия и подтверждения email.
    - NewMessageEvent: Для уведомления получателя о новом сообщении.
    - OrderPublishedEvent: Для уведомления фрилансеров о новых заказах.
    - OrderAcceptedForPayoutEvent: Для уведомления о выплате.
    - OrderFullyCompletedEvent: Для окончательного уведомления о завершении заказа.
    - PaymentProcessedEvent: Для подтверждения финансовых транзакций.
    - TicketCreatedEvent: Для подтверждения создания обращения.
    - TicketUpdatedEvent: Для уведомления об ответе на обращение.
    - TicketDisputedEvent: Для уведомления о повторной подаче.
    - TicketEscalatedEvent: Для уведомления администратора и пользователя.
    - SystemNotificationEvent: От Admin Service, для общих системных уведомлений.
    - UserPasswordChangedEvent, ProfileUpdatedEvent, User2FAEnabledEvent: Для уведомлений об изменениях в профиле/аккаунте.
    - UserReviewAddedEvent: Для уведомления пользователя о новом отзыве.

#### **7. Payment Service**

- **Публикует:**
    - PaymentProcessedEvent: После успешного завершения любой финансовой транзакции (списание, начисление, комиссия, премия).
    - FundsDebitedEvent: (Опционально) Общее событие о списании средств.
    - FundsCreditedEvent: (Опционально) Общее событие о зачислении средств.
- **Потребляет:**
    - OrderAcceptedForPayoutEvent: Для инициации процесса выплаты по завершенному заказу.

#### **8. Support & Dispute Service**

- **Публикует:**
    - TicketCreatedEvent: При создании нового обращения.
    - TicketUpdatedEvent: При изменении статуса обращения или добавлении ответа.
    - TicketDisputedEvent: При оспаривании пользователем решения поддержки.
    - TicketEscalatedEvent: При автоматической эскалации обращения администратору.
    - ReviewModeratedEvent: (Предполагаемое событие) Когда отзыв удален или его статус изменен модератором.
- **Потребляет:** (Не потребляет напрямую, его триггеры - это API запросы от Frontend/Admin).

#### **9. Analytics & Reporting Service**

- **Публикует:** (Не публикует, его роль - только собирать и агрегировать данные).
- **Потребляет:**
    - **Все "бизнес-события" из других сервисов**: UserRegisteredEvent, ProfileUpdatedEvent, UserReviewAddedEvent, OrderPublishedEvent, OrderAcceptedForPayoutEvent, OrderFullyCompletedEvent, NewMessageEvent, PaymentProcessedEvent, TicketCreatedEvent, TicketUpdatedEvent, TicketDisputedEvent, TicketEscalatedEvent и любые другие события, несущие информацию о бизнес-активности.

#### **10. Admin Service**

- **Публикует:**
    - SystemNotificationEvent: Для отправки общих системных уведомлений или важных изменений в настройках.
    - PlatformSettingUpdatedEvent: (Предполагаемое событие) Когда изменяются глобальные настройки платформы (комиссии, стоимость публикации).
    - UserBlockedEvent / UserUnblockedEvent: (Предполагаемое событие) Когда администратор блокирует/разблокирует пользователя.
- **Потребляет:**
    - TicketEscalatedEvent: Для автоматического создания задачи по эскалированному обращению.