#### **1. Общие функциональные требования платформы (выведены из бизнес-требований)**

- **FR-SYS-1.1**: Система должна обеспечивать интегрированное хранение и управление всеми элементами взаимодействия между пользователями в едином информационном пространстве.
    - **FR-SYS-1.1.1**: Система должна предоставлять пользователям возможность создавать и редактировать профили с историей проектов, откликов и заказов.
    - **FR-SYS-1.1.2**: Система должна связывать данные пользователя, заказов и коммуникаций в рамках единой модели учётной записи.
    - **FR-SYS-1.1.3**: Система должна сохранять и отображать актуальное состояние каждого взаимодействия (например, активный заказ, завершённый проект, архив общения).
- **FR-SYS-1.2**: Система должна обеспечивать полную прозрачность всех процессов и событий, связанных с заказами и взаимодействиями, с возможностью их аудита.
    - **FR-SYS-1.2.1**: Система должна сохранять историю всех изменений по каждому заказу, включая смену статуса, сроки, действия сторон.
    - **FR-SYS-1.2.2**: Система должна отображать пользователям текущий статус заказа и перечень выполненных/предстоящих этапов.
    - **FR-SYS-1.2.3**: Система должна формировать лог действий, доступный пользователям в рамках их прав.
- **FR-SYS-1.3**: Система должна минимизировать использование сторонних коммуникационных каналов, обеспечивая централизованное управление коммуникациями.
    - **FR-SYS-1.3.1**: Система должна обеспечивать возможность обмена сообщениями между участниками проекта в рамках встроенного мессенджера.
    - **FR-SYS-1.3.2**: Система должна сохранять историю переписки и делать её доступной в карточке заказа или взаимодействия.
    - **FR-SYS-1.3.3**: Система должна обеспечивать асинхронную доставку сообщений с гарантией получения (например, через очередь сообщений).
- **FR-SYS-1.4**: Система должна гарантировать безопасность взаимодействий, включая управление ролями, аутентификацию пользователей и контроль исполнения соглашений.
    - **FR-SYS-1.4.1**: Система должна реализовать регистрацию и вход пользователей с использованием аутентификации по JWT.
    - **FR-SYS-1.4.2**: Система должна ограничивать доступ к функциям в зависимости от роли пользователя и контекста действия.
    - **FR-SYS-1.4.3**: Система должна фиксировать и хранить сведения о принятии сторонами условий сделки (например, акцепт условий, подтверждение сроков).
- **FR-SYS-1.5**: Система должна обеспечивать доступность и полноту аналитических данных, необходимых для оценки эффективности и принятия управленческих решений.
    - **FR-SYS-1.5.1**: Система должна собирать и агрегировать данные о заказах, профилях, активности пользователей.
    - **FR-SYS-1.5.2**: Система должна предоставлять отчётность по ключевым метрикам: кол-во успешных заказов, средняя длительность проекта, активность фрилансеров и заказчиков.
    - **FR-SYS-1.5.3**: Система должна позволять выгружать отчёты в стандартных форматах (CSV, JSON, PDF).
- **FR-SYS-1.6**: Система должна быть разработана с учётом масштабируемости и возможности интеграции с внешними системами и сервисами.
    - **FR-SYS-1.6.1**: Система должна предоставлять REST API с документацией (через Swagger).
    - **FR-SYS-1.6.2**: Архитектура системы должна позволять масштабирование отдельных компонентов без остановки основной функциональности (микросервисная модель).

---

#### **2. Функциональные требования: Регистрация и управление профилями**

- **FR-USR-2.1**: Система должна предоставлять пользователю возможность зарегистрироваться с выбором типа профиля: «фрилансер» или «заказчик».
- **FR-USR-2.2**: Система должна сохранять данные, указанные пользователем при регистрации: имя, email, страна и выбранный тип профиля.
- **FR-USR-2.3**: Один пользователь может иметь несколько профилей разных типов, при этом для каждого профиля должна использоваться уникальная электронная почта.
- **FR-USR-2.4**: Телефонный номер может быть один и использоваться для нескольких профилей одного пользователя.
- **FR-USR-2.5**: Система должна предоставлять пользователю интерфейс для заполнения и редактирования профиля после регистрации.
- **FR-USR-2.6**: Система должна поддерживать разные поля профиля в зависимости от выбранного типа:
    - Для фрилансера: описание, портфолио, навыки, стили работы.
    - Для заказчика: описание компании или проекта, контактная информация.
- **FR-USR-2.7**: Система должна отображать профили пользователей на платформе.
- **FR-USR-2.8**: Пользователь может редактировать только свой собственный профиль (контактные данные, описание, портфолио и т.п.).
- **FR-USR-2.9**: Администратор платформы может редактировать любой профиль (при модерации, жалобах и нарушениях).
- **FR-USR-2.10**: Заказчик может просматривать профиль фрилансера, включая: имя/псевдоним, аватар, портфолио, навыки, опыт, рейтинг и отзывы. **Контактные данные пользователя (email, телефон) не отображаются.**
- **FR-USR-2.11**: Фрилансер может просматривать профиль заказчика, включая: название компании или имя, описание, список опубликованных проектов, рейтинг и отзывы. **Контактные данные пользователя (email, телефон) не отображаются.**
- **FR-USR-2.12**: Система должна позволять пользователю изменить тип профиля (фрилансер/заказчик), только если:
    - пользователь завершил все текущие обязательства (например, нет активных контрактов);
    - подтверждено новое согласие с пользовательским соглашением;
    - изменен email (в случае, если в системе тип профиля связан с типом email-домена, например, корпоративным).
- **FR-USR-2.13**: Один пользователь может иметь более одного профиля (например, фрилансер и заказчик), но на каждую роль — отдельный email. Один и тот же номер телефона может быть указан в обоих профилях.

---

#### **3. Функциональные требования: Аутентификация и безопасность (2FA)**

- **FR-AUTH-3.1**: Пользователь может включить двухфакторную аутентификацию (2FA) в настройках безопасности профиля.
- **FR-AUTH-3.2**: При включении 2FA пользователь должен выбрать метод подтверждения: SMS-код на привязанный номер телефона или TOTP-приложение.
- **FR-AUTH-3.3**: Система должна предоставлять пользователю возможность выбора электронной почты в качестве метода получения одноразового кода для двухфакторной аутентификации, за исключением случаев, когда требуется подтверждение номера телефона.
- **FR-AUTH-3.4**: При включенной 2FA при каждом входе в систему после ввода пароля система запрашивает ввод второго фактора (одноразового кода).
- **FR-AUTH-3.5**: При включении 2FA пользователь получает набор резервных кодов для входа в случае утери доступа к основному способу.
- **FR-AUTH-3.6**: Пользователь может отключить 2FA, введя текущий пароль и одноразовый код (если 2FA включена).
- **FR-AUTH-3.7**: Система должна предложить опцию «Доверять этому устройству» при успешной 2FA — если выбрано, то второй фактор не будет запрашиваться на данном устройстве 30 дней.
- **FR-AUTH-3.8**: При входе с нового устройства/браузера 2FA всегда запрашивается, даже если пользователь ранее входил в аккаунт.

---

#### **4. Функциональные требования для роли “Фрилансер”**

- **FR-FREEL-4.1**: Система должна позволять пользователю зарегистрироваться как фрилансер, указав основные данные (имя, email, страна и т.п.).
- **FR-FREEL-4.2**: Система должна позволять фрилансеру заполнять и редактировать профиль, включая портфолио и описание опыта.
- **FR-FREEL-4.3**: Фрилансер должен иметь возможность указать используемые технологии и стили (для дальнейшей фильтрации заказов).
- **FR-FREEL-4.4**: Профиль фрилансера должен быть доступен для просмотра заказчиками, но редактируем только самим фрилансером.
- **FR-FREEL-4.5**: Система должна предоставлять каталог активных заказов с возможностью фильтрации по технологии, срокам, бюджету, категории и стилю.
- **FR-FREEL-4.6**: Фрилансер должен иметь возможность отправлять отклик на выбранный заказ с комментарием, предложением сроков и бюджета.
- **FR-FREEL-4.7**: Фрилансер должен иметь возможность предложить альтернативное техническое решение или стек технологий, отличный от указанного заказчиком.
- **FR-FREEL-4.8**: После подтверждения отклика заказчиком, система должна переводить заказ в статус “в работе”.
- **FR-FREEL-4.9**: Фрилансер должен иметь возможность отправлять промежуточные отчёты и финальные результаты через систему.
- **FR-FREEL-4.10**: Система должна сохранять всю историю переписки и отправленных материалов между фрилансером и заказчиком в рамках заказа.
- **FR-FREEL-4.11**: После принятия результата заказчиком, система должна зачислять оплату фрилансеру за вычетом комиссии платформы.
- **FR-FREEL-4.12**: Заказчик должен иметь возможность добавить “премию” к выплате.
- **FR-FREEL-4.13**: Фрилансер должен получить уведомление о зачислении средств, видеть баланс, историю начислений и списаний.
- **FR-FREEL-4.14**: После завершения проекта фрилансер должен иметь возможность: оставить оценку сотрудничеству с заказчиком (в виде рейтинга), оставить текстовый отзыв о заказчике.
- **FR-FREEL-4.15**: Фрилансер должен иметь возможность отправить обращение в поддержку через специальный интерфейс.
- **FR-FREEL-4.16**: При несогласии с решением поддержки фрилансер должен иметь возможность запросить пересмотр.
- **FR-FREEL-4.17**: При повторной подаче обращения оно должно автоматически попадать к другому сотруднику поддержки.
- **FR-FREEL-4.18**: При третьем запросе система должна инициировать эскалацию — автоматическое обращение к администратору.
- **FR-FREEL-4.19**: История всех обращений должна быть сохранена и доступна фрилансеру для просмотра.

---

#### **5. Функциональные требования для роли “Заказчик”**

- **FR-CUST-5.1**: Система должна позволять пользователю зарегистрироваться как заказчик, указав имя, email и контактные данные.
- **FR-CUST-5.2**: Заказчик должен иметь возможность редактировать свой профиль.
- **FR-CUST-5.3**: Профиль заказчика должен быть видимым фрилансерам, но с ограниченной информацией (например, без email и телефона).
- **FR-CUST-5.4**: Система должна позволять заказчику создавать новый заказ, указывая: текстовое описание (техзадание), сроки выполнения, предполагаемый бюджет, теги: технологии, стили, категории задач.
- **FR-CUST-5.5**: Система должна требовать оплаты фиксированной суммы за размещение каждого заказа.
- **FR-CUST-5.6**: Система не должна публиковать заказ до подтверждения оплаты.
- **FR-CUST-5.7**: Заказчик должен иметь доступ к списку откликов на свой заказ.
- **FR-CUST-5.8**: Для каждого отклика заказчик может: просмотреть профиль фрилансера, оценить предложенные условия, принять отклик или отклонить его.
- **FR-CUST-5.9**: Заказчик может вести диалог с каждым откликнувшимся фрилансером, не раскрывая контактных данных.
- **FR-CUST-5.10**: После выбора фрилансера заказ переходит в активную фазу.
- **FR-CUST-5.11**: Заказчик получает промежуточные результаты и может отправлять комментарии, уточнения и запросы на доработку.
- **FR-CUST-5.12**: История переписки и всех файлов сохраняется в системе.
- **FR-CUST-5.13**: Заказчик должен иметь возможность: принять работу, отправить финальное подтверждение, оставить отзыв и выставить рейтинг фрилансеру.
- **FR-CUST-5.14**: После подтверждения завершения: система списывает средства со счёта заказчика, начисляет оплату фрилансеру с удержанием комиссии платформы, дает возможность добавить премию (точная сумма, задаваемая вручную).
- **FR-CUST-5.15**: Заказчик должен иметь доступ к истории всех заказов, статусов, отзывов.
- **FR-CUST-5.16**: Заказчик должен иметь счёт в системе.
- **FR-CUST-5.17**: Он должен иметь возможность пополнить счёт с помощью встроенных способов оплаты.
- **FR-CUST-5.18**: Списание средств происходит: при размещении заказа (фиксированная комиссия), при подтверждении выполнения фрилансером (основная сумма + опциональная премия).
- **FR-CUST-5.19**: Баланс и история операций должны быть доступны в профиле заказчика.
- **FR-CUST-5.20**: Заказчик должен иметь возможность подать обращение в службу поддержки.
- **FR-CUST-5.21**: При несогласии с решением заказчик может подать повторное обращение.
- **FR-CUST-5.22**: Повторное обращение должно перенаправляться к другому сотруднику поддержки.
- **FR-CUST-5.23**: При третьем запросе система должна автоматически эскалировать инцидент администратору и зафиксировать его как потенциальную проблему качества работы поддержки.
- **FR-CUST-5.24**: История обращений сохраняется и доступна заказчику.

---

#### **6. Функциональные требования для роли “Сотрудник службы поддержки”**

- **FR-SUP-6.1**: Система должна позволять сотруднику поддержки просматривать список новых обращений от пользователей.
- **FR-SUP-6.2**: Поддержка должна иметь доступ к полному контексту обращения: содержимое жалобы/запроса, данные пользователя, история заказов, переписка и действия, связанные с инцидентом.
- **FR-SUP-6.3**: Сотрудник должен иметь возможность: назначить обращение на себя, оставить внутренние комментарии, отправить ответ пользователю, пометить обращение как решённое.
- **FR-SUP-6.4**: Если пользователь не согласен с решением, система должна создавать повторное обращение, которое автоматически назначается другому сотруднику.
- **FR-SUP-6.5**: При третьем обращении по тому же вопросу система должна: автоматически эскалировать инцидент на администратора, уведомить о возможной ошибке в работе поддержки, зафиксировать событие в отчёте качества.
- **FR-SUP-6.6**: Сотрудник поддержки должен иметь возможность: просматривать любые отзывы фрилансеров и заказчиков, удалять отзывы в случае спора или нарушения правил.
- **FR-SUP-6.7**: При удалении отзыва должно сохраняться обоснование, доступное в логах только администраторам.
- **FR-SUP-6.8**: Система должна предоставлять сотрудникам поддержку инструменты для: отслеживания спорных заказов, выявления повторных обращений, мониторинга отзывов, помеченных как потенциально нарушающие правила.
- **FR-SUP-6.9**: Поддержка должна иметь фильтры и поиск по обращениям, пользователям и заказам.
- **FR-SUP-6.10**: Сотрудник поддержки **не должен** иметь доступ к: редактированию или удалению пользовательских профилей, финансовым операциям пользователей, принудительному изменению условий активных заказов.
- **FR-SUP-6.11**: Сотрудник должен иметь доступ **только к тем обращениям**, которые находятся в его очереди или находятся в процессе обработки.

---

#### **7. Функциональные требования для роли “Администратор платформы”**

- **FR-ADM-7.1**: Система должна предоставлять администратору возможность: просматривать профили всех зарегистрированных пользователей (фрилансеров и заказчиков), временно блокировать или удалять пользователей при нарушении правил платформы, просматривать историю активности пользователя, включая: обращения в поддержку, отзывы, финансовые операции, историю заказов.
- **FR-ADM-7.2**: Администратор должен иметь возможность: просматривать обращения, находящиеся в работе у сотрудников службы поддержки, получать список обращений, по которым была инициирована повторная подача или эскалация, фиксировать и оценивать качество обработки обращений каждым сотрудником, вручную перераспределять обращения между сотрудниками.
- **FR-ADM-7.3**: В случае тройной подачи жалобы (двойное несогласие с решением техподдержки) система должна: создавать автоматическое уведомление и задачу для администратора, предоставлять полный лог рассмотрения предыдущих итераций обращения, позволять принять финальное решение, обязательное для всех сторон.
- **FR-ADM-7.4**: Администратор должен иметь доступ к агрегированной аналитике: динамика зачислений и выплат, доля успешных заказов, сумма удержанных комиссий, суммарные объемы премий.
- **FR-ADM-7.5**: Система должна позволять администратору: проверять подозрительные операции, вручную инициировать возврат средств (например, при обоснованной жалобе).
- **FR-ADM-7.6**: Администратор должен иметь доступ к панели управления с возможностью: устанавливать/изменять фиксированную стоимость публикации заказа, настраивать размер комиссии платформы, управлять справочниками (например, стеками технологий), редактировать тексты уведомлений, подсказок и шаблонов писем.
- **FR-ADM-7.7**: Администратор должен иметь возможность: просматривать удалённые сотрудниками поддержки отзывы и основания удаления, восстанавливать удалённые отзывы, если удаление признано необоснованным, устанавливать блокировки на повторную подачу отзывов по одному и тому же заказу.
- **FR-ADM-7.8**: Система должна предоставлять администратору доступ к дашбордам: статистика по пользователям, заказам, обращениям, финансовым операциям, рейтинги активности и удовлетворённости фрилансеров/заказчиков, динамика обращений в поддержку и их решений.
- **FR-ADM-7.9**: Администратор **не должен** иметь возможность: самостоятельно участвовать в заказах или откликаться на них от имени пользователей, проводить платежи без логирования и подтверждения.